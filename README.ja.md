# Tokyo Tesla 3D Drive - 東京テスラ3Dドライブ

Tesla Model Sが東京の首都高速道路C1ループを自動走行する、ブラウザベースの没入型3Dドライビングシミュレーション。Gran Turismoスタイルのドライバーズビュー視点で、ネオンに照らされた東京の夜を高速ドライブするスリルを体験してください。

## 機能

- **自動運転**: 座ってリラックスするだけ - Teslaが自動で運転します
- **ドライバーズビュー**: 運転席からの臨場感あふれる一人称視点
- **首都高速道路C1**: 東京の有名な環状線をループ走行
- **ナイトモード**: 東京の美しい夜景を体験
- **速度エフェクト**: モーションブラー、パーティクル、ダイナミックカメラムーブメントで臨場感を強化
- **リアルタイム3D**: Three.jsによるスムーズな60 FPSパフォーマンス
- **シンプル操作**: スタートボタンを押すだけで無限ドライブを楽しめます

## 技術スタック

- **Three.js**: WebGLベースの3Dレンダリング
- **ピュアJavaScript**: フレームワーク不要
- **HTML5 Canvas**: ハードウェアアクセラレーションレンダリング
- **ポストプロセッシング**: ブルームエフェクトで視覚効果を強化

## クイックスタート

### ローカル実行

1. このリポジトリをクローン:
```bash
git clone <repository-url>
cd race
```

2. 任意のHTTPサーバーでファイルを配信:

**Python 3の場合:**
```bash
python -m http.server 8000
```

**Node.js (http-server)の場合:**
```bash
npx http-server -p 8000
```

3. ブラウザで以下にアクセス:
```
http://localhost:8000
```

4. **START**ボタンをクリックしてドライブを楽しんでください！

## 操作方法

- **STARTボタン**: ドライビングシミュレーションを開始
- **ESCキー**または**Stopボタン**: スタート画面に戻る
- **運転操作なし**: 車両は完全に自動運転です

## ブラウザ互換性

推奨ブラウザ:
- Chrome 90+ (推奨)
- Firefox 88+
- Safari 14+
- Edge 90+

WebGLサポートとモダンJavaScript機能が必要です。

## パフォーマンス

アプリケーションは以下のために最適化されています:
- **目標**: モダンハードウェアで60 FPS
- **解像度**: デバイスに応じて適応
- **GPU**: ハードウェアアクセラレーションを利用
- **モバイル**: レスポンシブデザイン（デスクトップ推奨）

## プロジェクト構造

```
race/
├── index.html          # メインHTMLファイル
├── css/
│   └── style.css       # スタイリングとUI
├── js/
│   ├── main.js         # アプリケーションエントリーポイント
│   ├── scene.js        # シーン管理
│   ├── track.js        # 高速道路パスシステム
│   ├── vehicle.js      # Tesla Model S
│   ├── environment.js  # スカイボックス、ライティング、フォグ
│   └── effects.js      # ビジュアルエフェクト
└── assets/             # 将来: 3Dモデル、テクスチャ
```

## 機能詳細

### トラックシステム
- CatmullRomCurve3による滑らかな曲線パス
- レーンマーキングとガードレール
- トンネルセクション
- 街路灯
- シームレスループ

### 車両システム
- 簡略化されたTesla Model Sジオメトリ
- インテリアダッシュボードとステアリングホイール
- カーブに基づくステアリングアニメーション
- ダイナミックビーム付きヘッドライト
- 速度ベースのアニメーション

### 環境
- ビル群による東京の街並み
- 星空の夜景
- ダイナミック街路灯
- 大気フォグ
- ライティング付きビル窓

### エフェクト
- 速度感のためのパーティクルシステム
- 速度ベースのカメラシェイク
- モーショントレイル
- ブルームポストプロセッシング
- 速度反応型の透明度

## 今後の拡張

追加予定の機能:
- [ ] 複数の車両オプション
- [ ] 昼夜サイクル切り替え
- [ ] 天候エフェクト（雨、霧）
- [ ] 追加ルート
- [ ] サウンドエフェクトと音楽
- [ ] VRサポート
- [ ] より高品質な3Dモデル
- [ ] 実在する東京のランドマーク
- [ ] 交通シミュレーション
- [ ] リプレイシステム

## 開発

モダンなWeb技術とベストプラクティスで構築:
- モジュラーJavaScriptクラス
- 効率的なジオメトリ管理
- メモリを意識したリソース処理
- レスポンシブデザインパターン
- パフォーマンス最適化技術

## 実装詳細

### アーキテクチャ

プロジェクトは以下のクラスで構成されています:

- **Track**: 首都高速道路のパスと道路ジオメトリを管理
- **Vehicle**: Tesla Model Sのモデルとアニメーション
- **Environment**: スカイボックス、ライティング、フォグを管理
- **Effects**: パーティクル、カメラシェイクなどのビジュアルエフェクト
- **SceneManager**: Three.jsシーン、カメラ、レンダラーを統合管理
- **TokyoDriveApp**: UIインタラクションとゲームステート管理

### 主要な技術的特徴

1. **パスシステム**: CatmullRomCurve3を使用して滑らかなループパスを生成
2. **カメラシステム**: 車両に追従し、ドライバーズビューを維持
3. **パーティクルシステム**: 速度感を演出する2000個のパーティクル
4. **ポストプロセッシング**: UnrealBloomPassによるグローエフェクト
5. **パフォーマンス**: レンダリング最適化とLOD管理

## セットアップ手順

### 1. 前提条件

- モダンなWebブラウザ（Chrome推奨）
- ローカルWebサーバー（開発時）

### 2. インストール

```bash
# リポジトリをクローン
git clone <repository-url>
cd race

# ローカルサーバーを起動（Python 3の場合）
python -m http.server 8000

# または Node.js http-server
npx http-server -p 8000
```

### 3. ブラウザでアクセス

```
http://localhost:8000
```

### 4. 使用方法

1. STARTボタンをクリック
2. 読み込みが完了するまで待つ
3. 自動ドライブを楽しむ
4. ESCキーで終了

## トラブルシューティング

**起動時に黒い画面:**
- ブラウザコンソールでエラーを確認
- WebGLが有効か確認
- ブラウザ拡張機能を無効化してみる
- ページをリフレッシュ

**FPSが低い:**
- 他のタブ/アプリケーションを閉じる
- ブラウザウィンドウサイズを縮小
- GPUドライバーが最新か確認
- 最高のパフォーマンスにはChromeを使用

**STARTをクリックしても何も起こらない:**
- ブラウザコンソールを確認
- JavaScriptが有効か確認
- ハードリフレッシュを試す（Ctrl+F5）

## ライセンス

このプロジェクトは教育・デモンストレーション目的です。

## クレジット

- **Three.js**: 3Dレンダリングライブラリ
- **インスピレーション**: Gran Turismoシリーズ、東京ストリートレーシング文化
- **コンセプト**: リラックスできる無限ドライブ体験

## 貢献

プロジェクトをフォークして、改善のためのプルリクエストをお気軽に提出してください！

## 既知の問題

- 古いブラウザではポストプロセッシングエフェクトが動作しない可能性があります
- モバイルパフォーマンスは変動する可能性があります
- タブがアクティブでない場合、一部のブラウザでアニメーションが制限される可能性があります

---

東京を駆け抜ける無限のドライブをお楽しみください！ 🚗💨🗼
